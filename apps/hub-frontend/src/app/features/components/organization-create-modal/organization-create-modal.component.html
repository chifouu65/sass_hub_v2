<div class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
  <h2 class="text-lg font-semibold text-slate-900 mb-3">Créer une organisation</h2>
  <p class="text-sm text-slate-500 mb-4">
    Définissez un nom, un slug et éventuellement un nom de base de données personnalisé.
  </p>

  @if (formMessage(); as message) {
    <div
      class="mb-4 rounded-lg border px-4 py-3 text-sm"
      [class.bg-emerald-50]="message.kind === 'success'"
      [class.text-emerald-700]="message.kind === 'success'"
      [class.border-emerald-200]="message.kind === 'success'"
      [class.bg-red-50]="message.kind === 'error'"
      [class.text-red-700]="message.kind === 'error'"
      [class.border-red-200]="message.kind === 'error'"
    >
      {{ message.text }}
    </div>
  }

  <form class="space-y-4" [formGroup]="createOrganizationForm" (ngSubmit)="onSubmit()">
    <div>
      <label for="create-name" class="block text-sm font-medium text-slate-700 mb-1">Nom</label>
      <input
        id="create-name"
        type="text"
        formControlName="name"
        (input)="onNameInput()"
        class="form-input"
        placeholder="Ex. Hotel Corp"
      />
      @if (createOrganizationForm.controls['name']?.invalid && createOrganizationForm.controls['name']?.touched) {
        <p class="mt-1 text-xs text-red-600">
          Nom obligatoire (au moins 2 caractères).
        </p>
      }
    </div>

    <div>
      <label for="create-slug" class="block text-sm font-medium text-slate-700 mb-1">Slug</label>
      <input
        id="create-slug"
        type="text"
        formControlName="slug"
        (input)="onSlugInput()"
        class="form-input"
        placeholder="hotel-corp"
      />
      @if (createOrganizationForm.controls['slug']?.invalid && createOrganizationForm.controls['slug']?.touched) {
        <p class="mt-1 text-xs text-red-600">
          Slug invalide. Utilisez uniquement des minuscules, chiffres et tirets.
        </p>
      }
    </div>

    <div>
      <label for="create-db" class="block text-sm font-medium text-slate-700 mb-1">Nom de base de données (optionnel)</label>
      <input
        id="create-db"
        type="text"
        formControlName="databaseName"
        class="form-input"
        placeholder="tenant_hotel_corp"
      />
      <p class="mt-1 text-xs text-slate-500">
        Si laissé vide, un nom sera généré automatiquement.
      </p>
    </div>

    <div class="flex justify-end">
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="createOrganizationForm.invalid || createSubmitting()"
      >
        @if (createSubmitting()) {
          <i class="mdi mdi-loading mdi-spin text-sm"></i>
        }
        Créer
      </button>
    </div>
  </form>
</div>

